<Window x:Class="MacroGUI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MacroGUI"
        mc:Ignorable="d"
        Title="Controller" Height="450" Width="800" WindowStartupLocation="CenterScreen">

    <DockPanel>

        <!-- Bottom Status -->
        <Border DockPanel.Dock="Bottom" Height="32" Background="#2E7D32">
            <Grid Margin="10,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <!-- Dot -->
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="Auto"/>
                    <!-- Connected/Disconnected -->
                    <ColumnDefinition Width="12"/>
                    <ColumnDefinition Width="*"/>
                    <!-- LastSyncMessage -->
                </Grid.ColumnDefinitions>

                <Ellipse x:Name="StatusDot" Width="10" Height="10" VerticalAlignment="Center" Fill="IndianRed"/>
                <TextBlock x:Name="StatusTextBlock" Grid.Column="2"
                           VerticalAlignment="Center" Foreground="White"
                           Text="Disconnected"/>
                
                <TextBlock Grid.Column="4"
                   VerticalAlignment="Center"
                   Foreground="#C8E6C9"
                   FontSize="11"
                   Text="{Binding LastSyncMessage}"/>
            </Grid>
        </Border>

        <!-- Top Header -->
        <Border DockPanel.Dock="Top" Height="56" Background="#F5F5F5">
            <Grid Margin="12,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="600"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Macro selector -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="10"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <ListBox x:Name="MacroList"
                         ItemsSource="{Binding Macros}"
                         SelectedItem="{Binding SelectedMacro}"
                         ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                         ScrollViewer.VerticalScrollBarVisibility="Disabled">
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Name}" Margin="14,8"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>

                    <Button Grid.Column="2" Width="80" Height="34"
                            Content="+ 추가"
                            Margin="0,0,0,0"/>
                    <Button x:Name="UpdateButton"
                            Grid.Column="4" Width="80" Height="34"
                            Content="업데이트" Margin="0,0,0,0"
                            Click="UpdateButton_Click"/>
                </Grid>

                <!-- Selected macro info -->
                <StackPanel Grid.Column="1" Orientation="Vertical" HorizontalAlignment="Right">
                    <TextBlock Text="선택된 매크로" Foreground="#666"/>
                    <TextBlock Text="{Binding SelectedMacro.Name}"
                    FontSize="16"
                    FontWeight="SemiBold"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content -->
        <Grid Margin="12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3*"/>
                <ColumnDefinition Width="12"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="12"/>
                <ColumnDefinition Width="180"/>
            </Grid.ColumnDefinitions>

            <!-- Step Preview / List -->
            <Border Grid.Column="0" Background="#E3F2FD" CornerRadius="6" Padding="10">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="매크로 sequence" FontWeight="SemiBold" Margin="0,0,0,8"/>

                    <!-- 나중에 DataGrid로 교체 -->
                    <ListBox Grid.Row="1" ItemsSource="{Binding SelectedMacro.Steps}"/>
                </Grid>
            </Border>

            <!-- Secondary Panel (예: 실행 로그/프리뷰) -->
            <Border Grid.Column="2" Background="#E3F2FD" CornerRadius="6" Padding="10">
                <TextBlock Text="(예: 실행 프리뷰 / 로그 / 설명 영역)" VerticalAlignment="Center" HorizontalAlignment="Center"/>
            </Border>

            <!-- Right Buttons -->
            <StackPanel Grid.Column="4" VerticalAlignment="Top">
                <Button Height="56" Margin="0,0,0,10" Content="매크로 수정"/>
                <Button Height="56" Margin="0,0,0,10" Content="Key Setting"/>
                <Button Height="56" Margin="0,0,0,10" Content="기타1"/>
                <Button Height="56" Margin="0,0,0,10" Content="기타2"/>
            </StackPanel>
        </Grid>

    </DockPanel>
</Window>
